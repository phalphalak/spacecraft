#!/usr/bin/env ruby

require File.expand_path(
    File.join(File.dirname(__FILE__), %w[.. lib space_craft]))

require 'java'

java_import javax.swing.JFrame


planet = SpaceCraft::Model::Planet.new
planet.block_types << :solid
grid = SpaceCraft::Model::Grid.new(50,30)
7.times do |i|
  (7 - i*2).times do |j|
    grid[3+i+j, 9-i] = :solid
  end
end
5.times do |x|
  3.times do |y|
    grid[x+13,y+7] = :solid
  end
end
20.times do |i|
  grid.width.times do |x|
    grid[x,i+10] = :solid
  end
end
planet.grid = grid

panel = SpaceCraft::View::Planet.new

painter = SpaceCraft::Model::Painter.new
painter.view = panel
painter.planet = planet

tick = SpaceCraft::Controller::Tick.new
tick.painter = painter

tickThread = java.lang.Thread.new(tick)
tickThread.start

panel_controller = SpaceCraft::Controller::Planet.new

panel.controller = panel_controller
panel_controller.view = panel

frame = JFrame.new('spacecraft sandbox')
frame.content_pane = panel
frame.set_size(600,400)
frame.default_close_operation = JFrame::EXIT_ON_CLOSE
frame.visible = true
